<!-- PAGE_TITLE: Codegen | Tramway Drifting and Dungeon Exploration Simulator Software Development Kit -->

<h1>
	Codegen
</h1>

<hr/>

<p>
	Codegen is a small Python script to help with syncing up C++ entity
	serialization code and entdef files.
</p>

<h2>
	How to use
</h2>

<hr/>

<p>
	Open command prompt in you project's directory and run the codegen.py
</p>

<p>
	<code>
		C:\garden>codegen.py make StickyFroggy
	</code>
</p>

<p>
	The program will prompt you with the filename of the new file to be created.
	Press <code>y</code> to accept.
</p>

<p>
	<code>
		Tramway SDK Code generator v0.1.1<br/>
		Create file C:\garden\src\stickyfroggy.h? [y/n]
	</code>
</p>

<p>
	The program will now have created the files <code>/src/stickyfroggy.h</code>
	and <code>/src/stickyfroggy.cpp</code>.
</p>

<p>
	Let's open up stickyfroggy.h and take a look inside:
</p>

<code>
	<span class="codecomm">// Generated by Tramway SDK Code generator</span><br/>
	<br/>
	#<span class="codekeyw">include</span> &lt;<span class="codelit">framework/entity.h</span>&gt;<br/>
	#<span class="codekeyw">include</span> &lt;<span class="codelit">framework/serialization.h</span>&gt;<br/>
	<br/>
	#<span class="codekeyw">include</span> &lt;<span class="codelit">templates/macros.h</span>&gt;<br/>
	<br/>
	<span class="codekeyw">using namespace</span> tram;<br/>
	<br/>
	<span class="codekeyw">class</span> <span class="codeclass">StickyFroggy</span> : <span class="codekeyw">public</span> <span class="codeclass">Entity</span> {<br/>
	<span class="codekeyw">public</span>:<br/>
	&nbsp;&nbsp;<span class="codefunc">StickyFroggy</span>(<span class="codekeyw">const</span> <span class="codeclass">SharedEntityData</span>&amp;, <span class="codekeyw">const</span> <span class="codeclass">ValueArray</span>&amp;);<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_ENTITY_NAME(<span class="codelit">"stickyfroggy"</span>)<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">UpdateParameters</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">SetParameters</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Load</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Unload</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Serialize</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">EventHandler</span>(<span class="codeclass">Event</span>&amp; evt);<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">MessageHandler</span>(<span class="codeclass">Message</span>&amp; msg);<br/>
	&nbsp;&nbsp;<span class="codekeyw">name_t</span> <span class="codefunc">GetType</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">static void</span> <span class="codefunc">Register</span>();<br/>
	};
</code>

<p>
	Let's add some properties to the class!
</p>

<code>
<span class="codekeyw">class</span> <span class="codeclass">StickyFroggy</span> : <span class="codekeyw">public</span> <span class="codeclass">Entity</span> {<br/>
	<span class="codekeyw">public</span>:<br/>
	&nbsp;&nbsp;<span class="codefunc">StickyFroggy</span>(<span class="codekeyw">const</span> <span class="codeclass">SharedEntityData</span>&amp;, <span class="codekeyw">const</span> <span class="codeclass">ValueArray</span>&amp;);<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_ENTITY_NAME(<span class="codelit">"stickyfroggy"</span>)<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">UpdateParameters</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">SetParameters</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Load</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Unload</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">Serialize</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">EventHandler</span>(<span class="codeclass">Event</span>&amp; evt);<br/>
	&nbsp;&nbsp;<span class="codekeyw">void</span> <span class="codefunc">MessageHandler</span>(<span class="codeclass">Message</span>&amp; msg);<br/>
	&nbsp;&nbsp;<span class="codekeyw">name_t</span> <span class="codefunc">GetType</span>();<br/>
	&nbsp;&nbsp;<span class="codekeyw">static void</span> <span class="codefunc">Register</span>();<br/>
	<span class="codekeyw">private</span>:
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_KEY_VALUE(<span class="codelit">"model"</span>, <span class="codelit">"frog-marker"</span>)<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_PROPERTY(<span class="codelit">"viewmodel"</span>, FIELD_SERIALIZE)<br/>
	&nbsp;&nbsp;<span class="codekeyw">name_t</span> viewmodel = <span class="codelit">"frog"</span>;<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_PROPERTY(<span class="codelit">"stickiness"</span>, FIELD_SERIALIZE)<br/>
	&nbsp;&nbsp;<span class="codekeyw">float</span> stickiness = <span class="codelit">1.5f</span>;<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_PROPERTY(<span class="codelit">"roll"</span>, FIELD_SERIALIZE)<br/>
	&nbsp;&nbsp;<span class="codekeyw">bool</span> egg;<br/>
	&nbsp;&nbsp;<br/>
	&nbsp;&nbsp;TRAM_SDK_VIRTUAL_PROPERTY(<span class="codekeyw">int32_t</span>, <span class="codelit">"egg-count"</span>, FIELD_SERIALIZE, <span class="codelit">11</span>)<br/>
};
</code>

<p>
	After editing entity properties, we need to create/regenerate code and data
	files
</p>


<p>
	<code>
		C:\codegen.py refresh StickyFroggy
	</code>
</p>

<p>
	This command creates or overwrites these files
</p>

<p>
	<code>
		/src/stickyfroggy.inl<br/>
		/data/stickyfroggy.[number].entdef
	</code>
</p>

<p>
	If you want, you can take a look at the generated code in
	<code>stickyfroggy.inl</code> file, but don't bother editing it &mdash; it
	will be overwritten every time you run the refresh command.
</p>

<p>
	Let's look at the generated <code>.entdef</code> file
</p>

<code>
begin<br/>
&nbsp;&nbsp;# this comes from TRAM_SDK_ENTITY_NAME() macro<br/>
&nbsp;&nbsp;name stickyfroggy<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;# this comes from TRAM_SDK_KEY_VALUE() macro<br/>
&nbsp;&nbsp;model  frog-marker<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;# these come from TRAM_SDK_PROPERTY()<br/>
&nbsp;&nbsp;# and TRAM_SDK_VIRTUAL_PROPERTY() macros<br/>
&nbsp;&nbsp;field string viewmodel<br/>
&nbsp;&nbsp;field float stickiness<br/>
&nbsp;&nbsp;field bool roll<br/>
&nbsp;&nbsp;field int  egg-count<br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;# this is randomly generated index<br/>
&nbsp;&nbsp;version 193035075<br/>
end
</code>

<h2>
	Supported types
</h2>

<hr/>

<ul>
	<li><code>name_t</code></li>
	<li><code>bool</code></li>
	<li><code>int</code></li>
	<li><code>float</code></li>
	<li><code>double</code></li>
	<li><code>int8_t</code></li>
	<li><code>int16_t</code></li>
	<li><code>int32_t</code></li>
	<li><code>uint8_t</code></li>
	<li><code>uint16_t</code></li>
	<li><code>uint32_t</code></li>
	<li><code>vec2</code></li>
	<li><code>vec3</code></li>
	<li><code>vec4</code></li>
	<li><code>quat</code></li>
</ul>


